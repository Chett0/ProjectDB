<div class="page">
  <app-header></app-header>
  <main class="body">
    <div class="container">
      <form [formGroup]="searchForm" class="search-form">
        <div class="d-flex gap-2 flex-wrap">

          <mat-form-field class="form-input">
            <mat-label>Departure</mat-label>
            <input #departureCity type="text" placeholder="Pick one" matInput [formControl]="searchForm.controls.from" [matAutocomplete]="departureAuto"
              (input)="filterDepartureCities()" (focus)="filterDepartureCities()">
            <mat-autocomplete requireSelection #departureAuto="matAutocomplete">
              @for (option of filteredDepartureCities; track option) {
              <mat-option [value]="option">{{option}}</mat-option>
              }
            </mat-autocomplete> 
          </mat-form-field>

            <mat-form-field class="form-input">
            <mat-label>Destination</mat-label>
            <input #destinationCity type="text" placeholder="Pick one" matInput [formControl]="searchForm.controls.to" [matAutocomplete]="destinationAuto"
              (input)="filterDestinationCities()" (focus)="filterDestinationCities()">
            <mat-autocomplete requireSelection #destinationAuto="matAutocomplete">
              @for (option of filteredDestinationCities; track option) {
              <mat-option [value]="option">{{option}}</mat-option>
              }
            </mat-autocomplete> 
          </mat-form-field>

            <!-- [min]="today" -->
           <mat-form-field class="form-input">
            <mat-label>MM/DD/YYYY</mat-label>
            <input 
              matInput 
              [matDatepicker]="picker" 
              formControlName="departure_date"
              
              >
            <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>

          <button type="button" class="btn btn-primary" (click)="searchFlights()">Search</button>
        </div>

      </form>  
      <router-outlet></router-outlet>
      
    </div>
  </main>

  <app-footer></app-footer>
</div>